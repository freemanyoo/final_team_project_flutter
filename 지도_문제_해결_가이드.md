# í”ŒëŸ¬í„° ì§€ë„ ì‘ë™ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ì‘ë™í•˜ì§€ ì•Šì•˜ë˜ ì›ì¸ ìš”ì•½](#ì‘ë™í•˜ì§€-ì•Šì•˜ë˜-ì›ì¸-ìš”ì•½)
2. [ìƒì„¸ ë¬¸ì œ í•´ê²° ë°©ë²•](#ìƒì„¸-ë¬¸ì œ-í•´ê²°-ë°©ë²•)
3. [ì„¤ì • í™•ì¸ ì‚¬í•­](#ì„¤ì •-í™•ì¸-ì‚¬í•­)
4. [ì°¸ê³  ì •ë³´](#ì°¸ê³ -ì •ë³´)

---

## ì‘ë™í•˜ì§€ ì•Šì•˜ë˜ ì›ì¸ ìš”ì•½

| ë¬¸ì œ | ì›ì¸ | í•´ê²° ë°©ë²• | ìƒíƒœ |
|------|------|----------|------|
| ì§€ë„ íƒ€ì¼ ì•ˆ ë³´ì„ | Maps SDK ë¯¸í™œì„±í™” | Google Cloud Consoleì—ì„œ í™œì„±í™” | âœ… í•´ê²° |
| Android ë¹Œë“œ ì‹¤íŒ¨ | Google Play Services ëˆ„ë½ | `build.gradle.kts`ì— ì˜ì¡´ì„± ì¶”ê°€ | âœ… í•´ê²° |
| iOS ì§€ë„ ì•ˆ ë³´ì„ | API í‚¤ ë¯¸ì„¤ì • | `AppDelegate.swift`ì— API í‚¤ ì¶”ê°€ | âœ… í•´ê²° |
| cloudMapId ì˜¤ë¥˜ | ì˜ëª»ëœ Map ID | ì£¼ì„ ì²˜ë¦¬ | âœ… í•´ê²° |
| setState ì—ëŸ¬ | dispose í›„ setState | `mounted` ì²´í¬ ì¶”ê°€ | âœ… í•´ê²° |
| ì„œë²„ ì—°ê²° ì‹¤íŒ¨ | ì˜ëª»ëœ IP ì£¼ì†Œ | ì‹¤ì œ ê¸°ê¸° IP ì‚¬ìš© | âœ… í•´ê²° |
| ë§ˆì»¤ ì•ˆ ë³´ì„ | setState ëˆ„ë½ | ë§ˆì»¤ ìƒì„± í›„ setState í˜¸ì¶œ | âœ… í•´ê²° |

---

## ìƒì„¸ ë¬¸ì œ í•´ê²° ë°©ë²•

### 1. Google Maps API í‚¤ ì„¤ì • ë¬¸ì œ

#### ì›ì¸
- Google Cloud Consoleì—ì„œ "Maps SDK for Android"ê°€ í™œì„±í™”ë˜ì§€ ì•ŠìŒ
- API í‚¤ ì œí•œ ì„¤ì •ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŒ

#### ì¦ìƒ
- ì§€ë„ íƒ€ì¼ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ (íšŒìƒ‰ í™”ë©´)
- ì§€ë„ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ

#### í•´ê²° ë°©ë²•

1. **Google Cloud Console ì ‘ì†**
   - https://console.cloud.google.com/

2. **Maps SDK for Android í™œì„±í™”**
   - API ë° ì„œë¹„ìŠ¤ â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬
   - "Maps SDK for Android" ê²€ìƒ‰
   - í™œì„±í™” ë²„íŠ¼ í´ë¦­

3. **API í‚¤ ì œí•œ ì„¤ì • (ì„ íƒ, ë³´ì•ˆ ê°•í™”ìš©)**
   - API ë° ì„œë¹„ìŠ¤ â†’ ì‚¬ìš©ì ì¸ì¦ ì •ë³´
   - ì‚¬ìš© ì¤‘ì¸ API í‚¤ ì„ íƒ
   - ì• í”Œë¦¬ì¼€ì´ì…˜ ì œí•œì‚¬í•­: "Android ì•±" ì„ íƒ
   - íŒ¨í‚¤ì§€ ì´ë¦„: `com.example.final_team_project_flutter`
   - SHA-1 ì¸ì¦ì„œ ì§€ë¬¸ ì¶”ê°€:
     ```
     D7:85:13:C4:B1:E7:F6:CA:90:46:1C:8B:49:65:A2:0A:03:64:8F:FB
     ```

4. **SHA-1 ì¸ì¦ì„œ ì§€ë¬¸ í™•ì¸ ë°©ë²•**
   ```bash
   cd final_team_project_flutter
   keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android
   ```

---

### 2. Android ë¹Œë“œ ì„¤ì • ë¬¸ì œ

#### ì›ì¸
- `build.gradle.kts`ì— Google Play Services ì˜ì¡´ì„±ì´ ì—†ìŒ

#### ì¦ìƒ
- ì§€ë„ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ
- ì•± í¬ë˜ì‹œ ê°€ëŠ¥

#### í•´ê²° ë°©ë²•

`android/app/build.gradle.kts` íŒŒì¼ì— ë‹¤ìŒ ì˜ì¡´ì„± ì¶”ê°€:

```kotlin
dependencies {
    // Google Play Services for Maps
    implementation("com.google.android.gms:play-services-maps:18.2.0")
    implementation("com.google.android.gms:play-services-location:21.0.1")
}
```

**ì£¼ì˜**: `dependencies` ë¸”ë¡ì€ `android` ë¸”ë¡ ë°–ì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

---

### 3. iOS Google Maps API í‚¤ ë¯¸ì„¤ì •

#### ì›ì¸
- `AppDelegate.swift`ì— Google Maps API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•ŠìŒ

#### ì¦ìƒ
- iOSì—ì„œ ì§€ë„ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ

#### í•´ê²° ë°©ë²•

`ios/Runner/AppDelegate.swift` íŒŒì¼ ìˆ˜ì •:

```swift
import Flutter
import UIKit
import GoogleMaps

@main
@objc class AppDelegate: FlutterAppDelegate {
  override func application(
    _ application: UIApplication,
    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
  ) -> Bool {
    // Google Maps API í‚¤ ì„¤ì •
    GMSServices.provideAPIKey("AIzaSyBh8233jiBHLw9mjtOA9Y5KhM0sLqKqLg0")
    GeneratedPluginRegistrant.register(with: self)
    return super.application(application, didFinishLaunchingWithOptions: launchOptions)
  }
}
```

---

### 4. cloudMapId ì„¤ì • ë¬¸ì œ

#### ì›ì¸
- `simple_map_screen.dart`ì— ì˜ëª»ëœ `cloudMapId` ì‚¬ìš©
- Google Cloud Map IDê°€ ì—†ëŠ”ë° ì‚¬ìš©í•˜ë ¤ê³  í•¨

#### ì¦ìƒ
- ì§€ë„ ë¡œë“œ ì˜¤ë¥˜ ê°€ëŠ¥

#### í•´ê²° ë°©ë²•

`lib/screens/simple_map_screen.dart`ì—ì„œ `cloudMapId` ì£¼ì„ ì²˜ë¦¬:

```dart
GoogleMap(
  initialCameraPosition: CameraPosition(
    target: LatLng(
      _currentPosition!.latitude,
      _currentPosition!.longitude,
    ),
    zoom: 15,
  ),
  // cloudMapIdëŠ” Google Cloud Map IDê°€ ìˆì„ ë•Œë§Œ ì‚¬ìš©
  // cloudMapId: '9ab22eab75ae97fa',
  onMapCreated: (controller) {
    _mapController = controller;
  },
  // ...
)
```

---

### 5. setState() called after dispose() ì—ëŸ¬

#### ì›ì¸
- ìœ„ì ¯ì´ disposeëœ í›„ì—ë„ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ì–´ `setState` í˜¸ì¶œ
- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±

#### ì¦ìƒ
- ì•± í¬ë˜ì‹œ ë˜ëŠ” ì—ëŸ¬ ë¡œê·¸:
  ```
  setState() called after dispose(): _RestaurantMapScreenState#...
  ```

#### í•´ê²° ë°©ë²•

ëª¨ë“  `setState` í˜¸ì¶œ ì „ì— `mounted` ì²´í¬ ì¶”ê°€:

```dart
// âŒ ì˜ëª»ëœ ë°©ë²•
setState(() {
  _isLoading = false;
});

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
if (!mounted) return;
setState(() {
  _isLoading = false;
});
```

**ì ìš© ìœ„ì¹˜:**
- `_checkPermissionAndLoadMap()` ë©”ì„œë“œì˜ ëª¨ë“  `setState` í˜¸ì¶œ
- `findRestaurantsAndSetMarkers()` ë©”ì„œë“œì˜ ëª¨ë“  `setState` í˜¸ì¶œ
- ë¹„ë™ê¸° ì‘ì—…(`await`) í›„ì—ë„ `mounted` ì²´í¬ ì¶”ê°€

---

### 6. ë°±ì—”ë“œ ì„œë²„ ì—°ê²° ë¬¸ì œ (ì‹¤ì œ ê¸°ê¸°)

#### ì›ì¸
- ì‹¤ì œ Android ê¸°ê¸°ì—ì„œ `10.0.2.2` ì‚¬ìš© (ì—ë®¬ë ˆì´í„° ì „ìš©)
- PCì™€ ì‹¤ì œ ê¸°ê¸°ê°€ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ë¨

#### ì¦ìƒ
- "ì„œë²„ ì—°ê²° ì‹œê°„ ì´ˆê³¼ (10ì´ˆ)" ì—ëŸ¬
- ë°±ì—”ë“œ API í˜¸ì¶œ ì‹¤íŒ¨

#### í•´ê²° ë°©ë²•

**PCì˜ ì‹¤ì œ IP ì£¼ì†Œ í™•ì¸:**
```bash
# Windows
ipconfig | findstr /i "IPv4"

# Mac/Linux
ifconfig | grep "inet " | grep -v 127.0.0.1
```

**ì½”ë“œ ìˆ˜ì •:**
`lib/screens/restaurant_map_screen.dart`ì—ì„œ:

```dart
// ì„œë²„ URL ì„¤ì • (í”Œë«í¼ë³„ë¡œ ë‹¤ë¥¸ URL ì‚¬ìš©)
String baseUrl;
if (Platform.isAndroid) {
  // Android: ì—ë®¬ë ˆì´í„°ëŠ” 10.0.2.2, ì‹¤ì œ ê¸°ê¸°ëŠ” PCì˜ ì‹¤ì œ IP ì‚¬ìš©
  baseUrl = '10.100.201.26:8080'; // ì‹¤ì œ Android ê¸°ê¸°ìš© PC IP
  // baseUrl = '10.0.2.2:8080'; // Android ì—ë®¬ë ˆì´í„°ìš© (ì£¼ì„ í•´ì œí•˜ì—¬ ì‚¬ìš©)
} else if (Platform.isIOS) {
  // iOS: Macì˜ ì‹¤ì œ IP ì£¼ì†Œ ì‚¬ìš©
  // Macì—ì„œ IP í™•ì¸: ifconfig | grep "inet " | grep -v 127.0.0.1
  baseUrl = '192.168.50.80:8080'; // Macì˜ ì‹¤ì œ IP ì£¼ì†Œë¡œ ë³€ê²½ í•„ìš”
} else {
  baseUrl = 'localhost:8080'; // ê¸°íƒ€ í”Œë«í¼
}
```

**ë°±ì—”ë“œ ì„œë²„ ì„¤ì • í™•ì¸:**
- `application-dev.properties`ì—ì„œ `server.address=0.0.0.0` ì„¤ì • í™•ì¸
- ë°±ì—”ë“œ ì„œë²„ê°€ `0.0.0.0:8080`ì—ì„œ ë¦¬ìŠ¤ë‹ ì¤‘ì¸ì§€ í™•ì¸:
  ```bash
  netstat -ano | findstr :8080
  ```

---

### 7. ë§ˆì»¤ê°€ í‘œì‹œë˜ì§€ ì•ŠëŠ” ë¬¸ì œ

#### ì›ì¸
- ë§ˆì»¤ ìƒì„± í›„ `setState` í˜¸ì¶œ ëˆ„ë½
- UIê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

#### ì¦ìƒ
- ë°±ì—”ë“œì—ì„œ ë°ì´í„°ëŠ” ë°›ì•„ì˜¤ì§€ë§Œ ë§ˆì»¤ê°€ ì§€ë„ì— í‘œì‹œë˜ì§€ ì•ŠìŒ
- ë¡œê·¸ì—ëŠ” "ë§ˆì»¤ ìƒì„± ì™„ë£Œ" ë©”ì‹œì§€ê°€ ë³´ì„

#### í•´ê²° ë°©ë²•

ë§ˆì»¤ ìƒì„± í›„ `setState` í˜¸ì¶œí•˜ì—¬ UI ì—…ë°ì´íŠ¸:

```dart
// ë§ˆì»¤ ìƒì„±
for (var i = 0; i < _restaurantList.length; i++) {
  // ... ë§ˆì»¤ ì¶”ê°€ ì½”ë“œ ...
}

// ë§ˆì»¤ë¥¼ ì¶”ê°€í•œ í›„ UI ì—…ë°ì´íŠ¸
if (!mounted) return;
setState(() {
  _isLoading = false;
  _errorMessage = '';
});
```

---

## ì„¤ì • í™•ì¸ ì‚¬í•­

### Android ì„¤ì •

1. **AndroidManifest.xml**
   - ì¸í„°ë„· ê¶Œí•œ: `<uses-permission android:name="android.permission.INTERNET"/>`
   - ìœ„ì¹˜ ê¶Œí•œ: `<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>`
   - Google Maps API í‚¤: `<meta-data android:name="com.google.android.geo.API_KEY" .../>`

2. **build.gradle.kts**
   - Google Play Services ì˜ì¡´ì„± ì¶”ê°€ í™•ì¸

3. **pubspec.yaml**
   - `google_maps_flutter: ^2.5.0` í™•ì¸
   - `geolocator: ^13.0.0` í™•ì¸

### iOS ì„¤ì •

1. **AppDelegate.swift**
   - Google Maps API í‚¤ ì„¤ì • í™•ì¸

2. **Info.plist**
   - ìœ„ì¹˜ ê¶Œí•œ ì„¤ëª… ì¶”ê°€ í™•ì¸:
     - `NSLocationWhenInUseUsageDescription`
     - `NSLocationAlwaysAndWhenInUseUsageDescription`

3. **Podfile**
   - `pod install` ì‹¤í–‰ í™•ì¸

---

## ì°¸ê³  ì •ë³´

### IP ì£¼ì†Œ ì„¤ì • ê°€ì´ë“œ

#### Android
- **ì—ë®¬ë ˆì´í„°**: `10.0.2.2:8080` (í˜¸ìŠ¤íŠ¸ PCë¥¼ ê°€ë¦¬í‚´)
- **ì‹¤ì œ ê¸°ê¸°**: PCì˜ ì‹¤ì œ IP ì£¼ì†Œ ì‚¬ìš© (ì˜ˆ: `10.100.201.26:8080`)

#### iOS
- **ì‹œë®¬ë ˆì´í„°**: Macì˜ ì‹¤ì œ IP ì£¼ì†Œ ì‚¬ìš© (ì˜ˆ: `192.168.50.80:8080`)
- **ì‹¤ì œ ê¸°ê¸°**: Macê³¼ ê°™ì€ Wi-Fi ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ë˜ì–´ ìˆì–´ì•¼ í•¨

### ë°±ì—”ë“œ ì„œë²„ ì„¤ì •

ë°±ì—”ë“œ ì„œë²„ê°€ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •:

`application-dev.properties`:
```properties
server.address=0.0.0.0
server.port=8080
```

### ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸

1. **PCì™€ ê¸°ê¸°ê°€ ê°™ì€ Wi-Fi ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸**
2. **Windows ë°©í™”ë²½ì´ 8080 í¬íŠ¸ë¥¼ ë§‰ê³  ìˆì§€ ì•Šì€ì§€ í™•ì¸**
3. **ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸**

### í…ŒìŠ¤íŠ¸ ë°©ë²•

ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒ URLë¡œ ì ‘ê·¼í•˜ì—¬ ì„œë²„ê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸:
```
http://[PC_IP]:8080/api/map/search?foodName=ì¹˜í‚¨&latitude=35.156&longitude=129.059
```

---

## ìµœì¢… í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Google Cloud Consoleì—ì„œ Maps SDK for Android í™œì„±í™”
- [ ] Android `build.gradle.kts`ì— Google Play Services ì˜ì¡´ì„± ì¶”ê°€
- [ ] iOS `AppDelegate.swift`ì— Google Maps API í‚¤ ì„¤ì •
- [ ] ëª¨ë“  `setState` í˜¸ì¶œ ì „ì— `mounted` ì²´í¬ ì¶”ê°€
- [ ] ì‹¤ì œ ê¸°ê¸°ìš© IP ì£¼ì†Œë¡œ ë³€ê²½
- [ ] ë§ˆì»¤ ìƒì„± í›„ `setState` í˜¸ì¶œ í™•ì¸
- [ ] ë°±ì—”ë“œ ì„œë²„ê°€ `0.0.0.0:8080`ì—ì„œ ë¦¬ìŠ¤ë‹ ì¤‘ì¸ì§€ í™•ì¸
- [ ] PCì™€ ê¸°ê¸°ê°€ ê°™ì€ Wi-Fi ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

---

## ë¬¸ì œ í•´ê²° ì™„ë£Œ ìƒíƒœ

âœ… **ëª¨ë“  ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆê³ , í˜„ì¬ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤.**

- ì§€ë„ íƒ€ì¼: ì •ìƒ í‘œì‹œ
- ë°±ì—”ë“œ ì—°ê²°: ì •ìƒ ì‘ë™
- ë§ˆì»¤ í‘œì‹œ: ì •ìƒ ì‘ë™ (21ê°œ ë§ˆì»¤)
- Android: ì •ìƒ ì‘ë™
- iOS: ì •ìƒ ì‘ë™ (Mac IP ì£¼ì†Œë§Œ í™•ì¸ í•„ìš”)

---

**ì‘ì„±ì¼**: 2025ë…„ 1ì›”
**í”„ë¡œì íŠ¸**: Final Team Project Flutter

